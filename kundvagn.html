<!DOCTYPE html>
<html>
<head>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/main2.css" />
    <script src="mockups/main2.js"></script>
    <style>
       
h3 {
    text-align: center;
}

a {
    color:black;
    display: inline;
    text-align: center;
}
ul {
    list-style-type: none;
    text-align: center;
}
img{
    height: 140px;
   
}

body {
    background-color: white;
    color: white;
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
}
            
.topnav {
    overflow: hidden;
    background-color: #333;
}
            
.topnav a {
    float: left;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
}
            
.topnav a:hover {
    background-color: #ddd;
    color: black;
}
            
.topnav a.active {
    background-color: #4CAF50;
    color: white;
}
</style>
</head>
<body  onload="initSite()">
    <div class="topnav" style="height:45px;background-color:black;">
        <a class="active" href="index.html" style="height:45px;background-color:black;"><b>TechStore</b></a>
        <a href="kundvagn.html" style="float:right;"><img src="assets/kundv_t.png" style="width:26px;height:26px ;"></a>
        <a href="#" id="count-cart" style="float:right;">0</a>
    </div>
   <h3 style="color:black"> <img src="assets/kundv_f.png" style="height:30px;">Kundvagn</h3>
    
    <!--    
        <a class="add-to-cart" href="#" data-name="iPhone X" data-price="11495">1</a> 
        <a class="add-to-cart" href="#" data-name="One Plus 5" data-price="4995">2</a> 
        <a class="add-to-cart" href="#" data-name="Galaxy S8" data-price="7990">3</a> 
        <a class="add-to-cart" href="#" data-name="LG V30" data-price="7495">4</a> 
        <a class="add-to-cart" href="#" data-name="iPhone_XS" data-price="11000">5</a>
        <a class="add-to-cart" href="#" data-name="iphone7-guld" data-price="5000">6</a>
        <a class="add-to-cart" href="#" data-name="samsung_Crown" data-price="10000">7</a>
        <a class="add-to-cart" href="#" data-name="razerphone2" data-price="4000">8</a> 
        <a class="add-to-cart" href="#" data-name="Xperia_XZ3" data-price="7500">9</a> 
        <a class="add-to-cart" href="#" data-name="Samsung_Xcover" data-price="10500">10</a> 
       
    -->  
    
    <div class="mobile">
        <ul id="show-cart"  style="display:block;">
           <li></li>
        </ul>
        
        <div style="text-align:center;color:black;">Total pris: &nbsp;<span id="total-cart"></span>&nbsp;kr</div>
        <div style="text-align:center;"> <button onclick="klar()" id="clear-cart" class="mobile" style="border:1px ;color:white;background-color:rgb(75, 75, 207);  border-radius:5px;display:center;">
            <img src="assets/check.png" style="width: 17px;height: 17px;"> Slutför ditt köp</button></div>
        <div  style="text-align:center;color:black;margin:5px;padding:5px;">
        </div>
    
</body>
<script>


    function klar() {
     alert("Du har slutfört ditt köp.");
    }
   

    </script>
    <script src="mockups/shoppingCart.js"></script>
<script>
    // navbar
function myFunction() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
        x.className += " responsive";
    } else {
        x.className = "topnav";
    }
}
// slut navbar js
    ///main div
    var listOfProducts;
    
    /** Get products from the json file and store it in a gobal variable */
    function loadProducts() {
        fetch("products.json")
        .then(function(response) {
            return response.json();
        })
        .then(function(products) {
            listOfProducts = products;
            addProductsToWebpage();
        });
    }
    function initSite() {
        loadProducts();
        var obj1 ={
        "title": "iPhone X",
        "description": "Last years phonefrom  Apple  with a beautiful all display front.",
        "image": "assets/iPhoneX.png",
        "price": 11495
    }
    
    
      var obj2 ={
        "title": "One Plus 5",
        "description": "Sleek and powerful smartphone from One Plus.",
        "image": "assets/OnePlus5.png",
        "price": 4995
    }
    
    
      var obj3 ={
        "title": "Galaxy S8",
        "description":"Really cool edge to edge smartphone from Samsung.",
        "image": "assets/SamsungS8.png",
        "price": 7990
    }
    
    
      var obj4 ={
        "title": "LG V30",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/LGV30.png",
        "price": 7495
    }
    var obj5 = {
        "title": "iPhone_XS",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/iPhone_XS.png",
        "price": 11000
    }
    var obj6 ={
        "title": "iphone7-guld",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/iphone7-guld.png",
        "price": 5000
    }
    var obj7 = {
        "title": "samsung_Crown",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/samsung_Crown.png",
        "price": 10000
    }
    var obj8 = {
        "title": "razerphone2",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/razerphone2.png",
        "price": 4000
    }
    var obj9 ={
        "title": "Xperia_XZ3",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/Xperia_XZ3.png",
        "price": 7500
    }
    var obj10 = {
        "title": "Samsung_Xcover",
        "description": "Super nice and beautiful smartphone from LG.",
        "image": "assets/Samsung_Xcover.png",
        "price": 10500
    }
        
    document.getElementById('mimmi').innerHTML ='<div style="text-align:center;">'+
    '<b>'+obj1.title+'</b>'+
    '<br>'+'<small>'+obj1.description+'</small>'+'<br>'+
        "<img src='assets/iPhoneX.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;' >" +
       '<b>'+ obj1.price + '</b>'+'kr'+'<br>'+
      '<a href="#" class="add-to-cart" href="#" data-name="iPhone X" data-price="11495" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+
       '</div>'+'<br>'+ '<div style="text-align:center">'+'<b>'+obj2.title+'</b>'+'<br>'+
      '<small>'+obj2.description+'</small>' +'<br>'+
         "<img src='assets/OnePlus5.png' style='display: block; margin-left: auto; margin-right: auto;width: 280px;' >"
       
       +'<b>'+ obj2.price + '</b>'+'kr'+'<br>'+'<a class="add-to-cart" href="#" data-name="One Plus 5" data-price="4995" href="#" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+ '</div>'+
       '<br>'+  '<div style="text-align:center">'
        +'<b>'+obj3.title+'</b>'+'<br>'+'<small>'+obj3.description+'</small>'+'<br>'+
    "<img src='assets/SamsungS8.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;'>"+
      '<br>'+'<b>'+ obj3.price + '</b>'
       +'kr'+'<br>'+'<a class="add-to-cart" href="#" data-name="Galaxy S8" data-price="7990" href="#" style="background-color:black;padding:3px;border-radius:4px;" ><small>läg till kundvägnen</small></a>'+
      ' </div>'+'<br>'+'<div style="text-align:center">'+'<b>'+obj4.title+'</b>'+'<br>' +
      
      '<small>'+obj4.description+'</small>'+'<br>'+
      "<img src='assets/LGV30.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;'>" +
         '<b>'+ obj4.price + '</b>'+'kr'+'<br>'+'<a href="#" class="add-to-cart"  data-name="LG V30" data-price="7495" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+
         '</div>'


+'<br>'+'<div style="text-align:center">'+
        '<b>'+obj5.title+'</b>'+
        '<br>'+'<small>'+obj5.description+'</small>'+'<br>'+
            "<img src='assets/iPhone_XS.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;' >" +
           '<b>'+ obj5.price + '</b>'+'kr'+'<br>'+
          '<a href="#" class="add-to-cart"  data-name="iPhone_XS" data-price="11000" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+
           '</div>'+'<div style="text-align:center">'+
        '<b>'+obj6.title+'</b>'+
        '<br>'+'<small>'+obj6.description+'</small>'+'<br>'+
            "<img src='assets/iphone7-guld.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;' >" +
           '<b>'+ obj6.price + '</b>'+'kr'+'<br>'+
          '<a href="#" class="add-to-cart"  data-name="iphone7-guld" data-price="5000" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+ '</div>'+
          '<br>'+'<div style="text-align:center">'+'<b>'+obj7.title+'</b>'+'<br>'+
          '<small>'+obj7.description+'</small>' +'<br>'+
             "<img src='assets/samsung_Crown.png' style='display: block; margin-left: auto; margin-right: auto;width: 280px;' >"
           +'<b>'+ obj7.price + '</b>'+'kr'+'<br>'+'<a href="#" class="add-to-cart"  data-name="samsung_Crown" data-price="10000" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+ '</div>'+
           '<br>'+'<div style="text-align:center">'+'<b>'+obj8.title+'</b>'+'<br>'+
           '<small>'+obj8.description+'</small>'+'<br>'+
        "<img src='assets/razerphone2.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;'>"+
      '<b>'+ obj8.price + '</b>'+'kr'+'<br>'+'<a href="#" class="add-to-cart"  data-name="razerphone2" data-price="4000"  style="background-color:black;padding:3px;border-radius:4px;" ><small>läg till kundvägnen</small></a>'+
          ' </div>'+'<br>'+
          '<div style="text-align:center">'+
            '<b>'+obj9.title+'</b>'+'<br>' +
          '<small>'+obj9.description+'</small>'+'<br>'+
          "<img src='assets/Xperia_XZ3.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;'>" +
             '<b>'+ obj9.price + '</b>'+'kr'+'<br>'+'<a href="#"class="add-to-cart"  data-name="Xperia_XZ3" data-price="7500"  style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+
             '</div>'+ '<br>'+'<div style="text-align:center">'+
        '<b>'+obj10.title+'</b>'+
        '<br>'+'<small>'+obj10.description+'</small>'+'<br>'+
            "<img src='assets/Samsung_Xcover.png' style='display: block; margin-left: auto; margin-right: auto;width: 200px;' >" +
           '<b>'+ obj10.price + '</b>'+'kr'+'<br>'+
          '<a href="#" class="add-to-cart"  data-name="Samsung_Xcover" data-price="10500" style="background-color:black;padding:3px;border-radius:4px;"><small>läg till kundvägnen</small></a>'+ '</div>';
    
        }
       
    
            //jquery
           

        
        $(".add-to-cart").click(function(event) {
            event.preventDefault();
            var name = $(this).attr("data-name");
            var price = Number($(this).attr("data-price"));
            shoppingCart.addItemToCart(name,price,1);
            displayCart();
        });
        
        $("#clear-cart").click(function(event){
            shoppingCart.ClearCart();
            displayCart();
        });
         function  displayCart() {
            
            var cartArray = shoppingCart.listCart();
            var output = "";
            for (var i in cartArray) {
                output +="<div style='font-size:smaller;border-radius:5px; border:1px solid blue;display:inline-block;color:black;margin:4px;'>" 
                    + '<img src="'+'assets/'+cartArray[i].price+'.png">'+'<br>'
                    +" <input class='item-count' type = 'number' style='width:33px;height:19px;border-radius:3px;' data-name ='"  
                    +cartArray[i].name
                    + "' value ='" +  cartArray[i].count+ "' >"
                    + " x " + cartArray[i].price
                     +  " = " + cartArray[i].total.toFixed(2)
                     + " kr "+'<br>'
                    + "<button style='background-color:red;color:white;border-radius:5px 0 0 5px;' class='plus-item' data-name='"
                    +cartArray[i].name+"' >+</button>"
                    + "<button style='background-color:red;color:white;' class='subtract-item' data-name='"
                    +cartArray[i].name+"' >-</button>"
                    + "<button class='delete-item' style='background-color:red;color:white;border-radius:0 5px 5px 0;' data-name='"
                    +cartArray[i].name+"' ><img src='assets/trash.jpg' style='width:18px;height:18px;'> Ta bort</button>" 
                    + "</div>"
             }        
                    
                    
           
            $("#show-cart").html(output);
            $("#count-cart").html(shoppingCart.countCart());
            $("#total-cart").html(shoppingCart.totalCart());
        }
        $("#show-cart").on("click", ".delete-item", function(event){
        var name = $(this).attr("data-name");
        shoppingCart.removeItemFromCartAll(name);
        displayCart();
        });
        $("#show-cart").on("click", ".subtract-item", function(event){
        var name = $(this).attr("data-name");
        shoppingCart.removeItemFromCart(name);
        displayCart();
        });
        $("#show-cart").on("click", ".plus-item", function(event){
        var name = $(this).attr("data-name");
        shoppingCart.addItemToCart(name,0,1);
        displayCart();
        });
        $("#show-cart").on("change", ".item-count", function(event) {
            var name = $(this).attr("data-name");
            var count =Number($(this).val());
            shoppingCart.setCountForItem(name,count);
            displayCart();
        })
       
        displayCart();
        //var array = listCart();
        
        ///
        </script>
</html>