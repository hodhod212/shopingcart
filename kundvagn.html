<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>      
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>
    <title>TechStore</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="assets/main2.css" />
    <script src="mockups/main2.js"></script>
    <style>
       
h3 {
    text-align: center;
}

a {
    color: #212121;
    display: inline;
    text-align: center;
}
ul {
    list-style-type: none;
    text-align: center;
}
img{
    height: 140px;
   
}

body {
    background-color: white;
    color: white;
    margin: 0;
    font-family: Arial, Helvetica, sans-serif;
}
            
.topnav {
    overflow: hidden;
    background-color: #333;
}
            
.topnav a {
    float: left;
    color: #f2f2f2;
    text-align: center;
    padding: 14px 16px;
    text-decoration: none;
    font-size: 17px;
}
            
.topnav a:hover {
    background-color: #ddd;
    color:  #212121;
}
            
.topnav a.active {
    background-color: #4CAF50;
    color: white;
}
</style>
</head>
<body  onload="initSite()">
    <div class="topnav" style="height:40px;background-color: #212121;">
        <a class="active" href="index.html" style="height:45px;background-color: #212121;"><b>TechStore</b></a>
        <a href="kundvagn.html" style="float:right;"><i class="fa fa-shopping-cart" style="font-size:24px;color:white;"></i></a>
        <a href="#" id="count-cart" style="float:right;">0</a>
    </div>
   <h3 style="color: #212121"> <i class="fa fa-shopping-cart" style="margin-right:5px;font-size:24px;color: #212121;"></i>Kundvagn</h3>

        

    
        <a class="add-to-cart" href="#" data-name="iPhone X" data-price="11495">1</a> 
        <a class="add-to-cart" href="#" data-name="One Plus 5" data-price="4995">2</a> 
        <a class="add-to-cart" href="#" data-name="Galaxy S8" data-price="7990">3</a> 
        <a class="add-to-cart" href="#" data-name="LG V30" data-price="7495">4</a> 
        <a class="add-to-cart" href="#" data-name="iPhone_XS" data-price="11000">5</a>
        <a class="add-to-cart" href="#" data-name="iphone7-guld" data-price="5000">6</a>
        <a class="add-to-cart" href="#" data-name="samsung_Crown" data-price="10000">7</a>
        <a class="add-to-cart" href="#" data-name="razerphone2" data-price="4000">8</a> 
        <a class="add-to-cart" href="#" data-name="Xperia_XZ3" data-price="7500">9</a> 
        <a class="add-to-cart" href="#" data-name="Samsung_Xcover" data-price="10500">10</a>  
    <div class="mobile">
        <ul id="show-cart"  style="display:block;">
           <li></li>
        </ul>
        
        <div style="text-align:center;color: #212121;">Total pris: &nbsp;<span id="total-cart"></span>&nbsp;kr</div>
        <div style="text-align:center;"> <button onclick="klar()" id="clear-cart" class="mobile" style="border:1px ;color:white;background-color: #5596F5;  border-radius:5px;display:center;">
            <i class="fa fa-check" style="font-size:24px;color:white"></i> Slutför ditt köp</button></div>
        <div  style="text-align:center;color: #212121;margin:5px;padding:5px;">
        </div>
    
</body>

<script>


    function klar() {
     alert("Du har slutfört ditt köp.");
    }
   

    </script>
    <script src="mockups/shoppingCart.js"></script>
<script>
    // navbar
function myFunction() {
    var x = document.getElementById("myTopnav");
    if (x.className === "topnav") {
        x.className += " responsive";
    } else {
        x.className = "topnav";
    }
}
// slut navbar js
    ///main div
    var listOfProducts;
    
    /** Get products from the json file and store it in a gobal variable */
    function loadProducts() {
        fetch("products.json")
        .then(function(response) {
            return response.json();
        })
        .then(function(products) {
            listOfProducts = products;
            addProductsToWebpage();
        });
    }
    function initSite() {
        loadProducts();
      console.log("asd")
    function addProductsToWebpage() {
    var ul = document.createElement('ul');
    for ( i in listOfProducts) {
        
        var li = document.createElement('li');
        var h2 = document.createElement('h2');
        h2.innerText = listOfProducts[i].title;
        var p = document.createElement('p');
        p.innerText = listOfProducts[i].description;
        var myImage = document.createElement('img');
        myImage.setAttribute('src','assets/'+listOfProducts[i].image);
        var h4 = document.createElement('h4');
        h4.innerText = listOfProducts[i].price;
        var Button = document.createElement('button');
        Button.setAttribute('data-name', listOfProducts[i].name);
        Button.setAttribute('data-price', listOfProducts[i].price);
        Button.setAttribute('src','assets/'+listOfProducts[i].image);

        Button.setAttribute('data', JSON.stringify(listOfProducts[i]));
        Button.setAttribute('class', 'add-to-cart');
        Button.setAttribute('onclick', "addProduct(this)");
        Button.innerHTML = '<i class="fa fa-cart-arrow-down" style="font-size:22px;color:white;margin-right:4px;"></i>lägg till kundvägnen';
        Button.setAttribute('style','border-radius:5px;')
        h4.appendChild(Button);
        p.appendChild(myImage);
        p.appendChild(h4)
        li.appendChild(h2);
        li.appendChild(p);
        document.body.appendChild(li); }
       
        }
        function addProduct(element) {
        console.log(JSON.parse(element.getAttribute("data")))
    }

    
            //jquery
           

        
        $(".add-to-cart").click(function(event) {
            event.preventDefault();
            var name = $(this).attr("data-name");
            var price = Number($(this).attr("data-price"));
            shoppingCart.addItemToCart(name,price,1);
            displayCart();
        });
        
        $("#clear-cart").click(function(event){
            shoppingCart.ClearCart();
            displayCart();
        });
         function  displayCart() {
            var cartArray = shoppingCart.listCart();
            var output = "";
            for (var i in cartArray) {
                output +="<div style='font-size:smaller;border-radius:5px; border:1px solid blue;display:inline-block;background-color:rgb(247,247,255);color:black;margin:4px;'>" 
                    + '<img src="'+'assets/'+cartArray[i].price+'.png">'+'<br>'
                    +'<h4>'+cartArray[i].name +'</h4>'
                    +" <input class='item-count' type = 'number' style='width:33px;height:19px;border-radius:3px;' data-name ='"  
                    +cartArray[i].name
                    + "' value ='" +  cartArray[i].count+ "' >"
                    + " x " + cartArray[i].price
                     +  " = " + cartArray[i].total.toFixed(2)
                     + " kr "+'<br>'
                    + "<button style='background-color:red;color:white;border-radius:5px 0 0 5px;' class='plus-item' data-name='"
                    +cartArray[i].name+"' >+</button>"
                    + "<button style='background-color:red;color:white;' class='subtract-item' data-name='"
                    +cartArray[i].name+"' >-</button>"
                    + "<button class='delete-item' style='background-color:red;color:white;border-radius:0 5px 5px 0;' data-name='"
                    +cartArray[i].name+"' ><i class='fa fa-trash-o' style='font-size:16px;color:white'></i> Ta bort</button>" 
                    + "</div>"
             }        
                    
                    
           
            $("#show-cart").html(output);
            $("#count-cart").html(shoppingCart.countCart());
            $("#total-cart").html(shoppingCart.totalCart());
        $("#show-cart").on("click", ".delete-item", function(event){
        var name = $(this).attr("data-name");
        shoppingCart.removeItemFromCartAll(name);
        displayCart();
        });
        $("#show-cart").on("click", ".subtract-item", function(event){
        var name = $(this).attr("data-name");
        shoppingCart.removeItemFromCart(name);
        displayCart();
        });
        $("#show-cart").on("click", ".plus-item", function(event){
        var name = $(this).attr("data-name");
        shoppingCart.addItemToCart(name,0,1);
        displayCart();
        });
        $("#show-cart").on("change", ".item-count", function(event) {
            var name = $(this).attr("data-name");
            var count =Number($(this).val());
            shoppingCart.setCountForItem(name,count);
            displayCart();
        })
       
        displayCart();
        //var array = listCart();
        addProduct();
         }
        ///
        </script>
</html>